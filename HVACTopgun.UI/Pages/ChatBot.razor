
@inject IJSRuntime JSRuntime

<div @ref="chatbotContainer" class=" @(isChatBotOpen ? "flex" : "hidden") fixed bottom-14 right-0 z-10 transition-all mr-2 ease-in-out duration-500 shadow-2xl flex flex-col">
   <div class="flex justify-between border-sky-500 border-b-2 bg-zinc-900 rounded-t-xl text-gray-100 font-bold px-2 text-left py-3"> 
    <img class="h-8 w-8 "src="/images/chatlogo.png" />
    <button @onclick="ToggleChatbot" class="px-1 text-gray-100 font-bold hover:text-sky-500">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
    </button>
</div>

    <iframe src='https://webchat.botframework.com/embed/BOT-QnA-HVACTopGun?s=JXLqGM4xnnI.5qilrMiKngZiHkawERNYK93EMaSibqF_9HCALmwXaM8' class="min-w-[350px] w-full min-h-[400px] border-gray-300 border-t-0 rounded-b-xl border-2"></iframe>
</div>
<button @onclick="ToggleChatbot" type="button" class="text-white bg-[#050708] hover:bg-[#050708]/90 fixed transition-all ease-in-out duration-500 bottom-0 right-0 z-10 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2.5 py-2.5 text-center inline-flex items-center dark:focus:ring-[#050708]/50 dark:hover:bg-[#050708]/30 mr-2 mb-2">
    @if (isChatBotOpen)
    {
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 5.25l-7.5 7.5-7.5-7.5m15 6l-7.5 7.5-7.5-7.5" />
        </svg>
    }
    else
    {
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155" />
        </svg>
    }
</button>
<style>
  .bg-image {
    background-image: url('path-to-your-image.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center center;
  }
</style>
@code {
    private ElementReference chatbotContainer;
    private ElementReference chatbotButton;
    private bool isChatBotOpen = true;
    private string chatBotClass => isChatBotOpen ? "flex" : "hidden";
    

    private void ToggleChatbot()
    {
        isChatBotOpen = !isChatBotOpen;
        StateHasChanged();
    }

}